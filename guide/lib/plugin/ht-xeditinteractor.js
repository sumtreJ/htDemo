!function(g,y,e){"use strict";var z="ht",C=g[z],I=C.Default,Q=C.graph,Z=I.getInternal(),R=Z.ui(),o=R.NodeUI.prototype,c=R.ShapeUI.prototype,W=Q.GraphView,K=W.prototype,u=R.EdgeUI.prototype,i=C.Node,U=C.Shape,m=C.Edge,d=C.Group,S=I.isTouchable,l=I.preventDefault,t=g.setTimeout,H=I.grow,G=I.isDragging,k=I.getDistance,L=null,E=C.List,T="undefined"!=typeof Float32Array?Float32Array:Array,v=Math,N=v.PI,n="Crossing",Y="No Crossing",b=N/2,j=2*N,F=v.atan2,x=v.sqrt,r=v.pow,A=v.sin,q=v.cos,V=v.min,$=v.max,M=v.abs,P=v.ceil,a=v.round,w=I.unionPoint,D=I.unionRect,B=I.containsPoint,s=I.clone,p="rgb(52, 152, 219)",_="red",h={northwest:0,north:1,northeast:2,west:7,east:3,southwest:6,south:5,southeast:4},J={width:400,height:100,comps:[{type:"shape",points:{func:function(){for(var i=[10,8,162,36,314,37,269,2,398,49,268,98,314,58,161,60,9,91,103,49,10,8],d=0;d<i.length;d++){var u=i[d];u=0===d%2?u/400*J.width:u/100*J.height,i[d]=u}return J.width>120&&(i[4]=J.width-26,i[6]=J.width-40,i[10]=J.width-40,i[12]=J.width-26,i[18]=33),i}},segments:[1,3,2,2,2,2,3,2,2],background:"white",gradient:"linear.east",gradientColor:"red"}]},O={width:300,height:300,comps:[{type:"circle",rect:[20,0,120,120],background:p,rotation:.61},{type:"circle",rect:[200,120,70,70],background:p,rotation:.61},{type:"circle",rect:[200,220,70,70],background:p,rotation:.61},{type:"shape",points:[80,60,80,155,200,155],borderWidth:20,borderColor:p},{type:"shape",points:[80,60,80,255,200,255],borderWidth:20,borderColor:p}]},X={width:300,height:300,comps:[{type:"shape",points:[114,239,115,106,112,73,149,73,149,73,175,73,177,105,179,261,178,302,147,307,98,308,83,307,72,276,73,260,72,81,74,29,115,21,191,21,221,22,224,53,223,238],segments:[1,2,3,2,3,2,3,2,4,2,3,2,3,2],borderWidth:20,borderColor:_,rotation:.61}]},f={width:300,height:300,comps:[{type:"circle",rect:[210,0,90,90],background:p},{type:"circle",rect:[0,210,90,90],background:p},{type:"shape",points:[255,45,45,255],borderWidth:20,borderColor:p}]},Zd={width:300,height:300,comps:[{type:"shape",points:[20,20,280,280],borderWidth:30,borderColor:_},{type:"shape",points:[280,20,20,280],borderWidth:30,borderColor:_}]},_o={width:300,height:300,comps:[{type:"shape",points:[270,30,30,150,270,270],borderWidth:40,borderColor:p}]},Qf={width:300,height:300,comps:[{type:"shape",points:[30,30,270,150,30,270],borderWidth:40,borderColor:_}]},Pq={width:300,height:300,comps:[{type:"rect",rect:[125.58,52.76,40,231.96],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[27.87,61.06,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:5.5},{type:"rect",rect:[113.36,61,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:.79}]},Jo={width:300,height:300,author:"",note:"",comps:[{type:"rect",rect:[135.15,38.76,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,2.35,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,115.72,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,167.62,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[135.15,177.33,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,251.39,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:3.14}]},Sl=function(t){var I=t.touches[0];return I?I:t.changedTouches[0]},Kd=function(y,C,i,n){return F(n-C,i-y)},op=function(n,e){return{x:n.x*e,y:n.y*e}},ec=function(B,J){B.each(function(C){return B.isSelected(C)?J(C):void 0})},Qb=function(e,B){e.reverseEach(function(c){return e.isSelected(c)?B(c):void 0})},El=function(x,v,w){var W,Q,A,z,B,p=this,g=v,D=p.gv;if(x instanceof U){A=x.getSegments();var i=D.getDataUI(x);B=i._55O.$15l,A&&A.size()||(A=ek(B)),x.isClosePath()&&A.indexOf(5)<0&&(A=new E(A._as),A.add(5)),W=Jm(x,i,g),Q=B[W]}else{var C=D.getDataUI(x);B=Nj(C,x.s("edge.points")),A=x.s("edge.segments"),A&&A.size()||(A=ek(B)),B=B._as,W=Jm(x,C,g),Q=B[W]}if(A&&(z=A.get(g)),2===z||1===z||5===z){var S=B[W+1];5===z&&(S=B[0]);var N=ts(Q,w,S);return N}return w},od=function(g,Q,H,x){var B=Q/2,Z=H/2,v=lo(g,-B,-Z,x),K=lo(g,B,-Z,x),m=lo(g,-B,Z,x),G=lo(g,B,Z,x),M=lo(g,0,-Z,x),E=lo(g,B,0,x),C=lo(g,0,Z,x),p=lo(g,-B,0,x);return[v,K,m,G,M,E,C,p]},ts=function(b,w,y){var _={x:w.x-b.x,y:w.y-b.y},l={x:y.x-b.x,y:y.y-b.y},A=x(r(y.x-b.x,2)+r(y.y-b.y,2)),f={x:l.x/A,y:l.y/A},q=_.x*f.x+_.y*f.y,s={x:f.x*q,y:f.y*q};return{x:b.x+s.x,y:b.y+s.y}},lo=function(z,M,n,h){var U=q(h)*M-A(h)*n,c=A(h)*M+q(h)*n;return z?{x:z.x+U,y:z.y+c}:{x:U,y:c}},Dj=function(v,f){return f>2*v?v:f/2},$d=function(c,A,f,O){var M=k(c,A);return f=O?V(f,M):Dj(f,M),M?f/=M:f=0,{x:c.x+(A.x-c.x)*f,y:c.y+(A.y-c.y)*f}},ao=function(a,I){var m,T,b=a.gv,i=a._data,Q=i._40I,t=i._41I,N=i.s("edge.offset"),U=i.s("edge.source.position"),C=i.s("edge.target.position"),n=i.s("edge.source.offset.x"),q=i.s("edge.source.offset.y"),k=i.s("edge.target.offset.x"),f=i.s("edge.target.offset.y"),Y=i.s("edge.source.anchor.x"),A=i.s("edge.source.anchor.y"),J=i.s("edge.target.anchor.x"),S=i.s("edge.target.anchor.y");if(I?(m=Z.getEdgeAgentPosition(b,Q,U,n,q,Y,A),T=Z.getEdgeAgentPosition(b,t,C,k,f,J,S)):(m=Z.getEdgeAgentPosition(b,Q,U,0,0,Y,A),T=Z.getEdgeAgentPosition(b,t,C,0,0,J,S)),"points"===i.s("edge.type")&&N&&!i.s("edge.center")&&m){var z=i.s("edge.points")||new E,W=z.size(),o=$d(m,W?z.get(0):T,N,W),B=$d(T,W?z.get(W-1):m,N,W);m=o,T=B}return[m,T]},Nj=function(K,p,e){var j=K._78o,I=K._data,H=I.s("edge.type"),d=[j.sourcePoint,j.targetPoint];return"points"===H?e&&(d=ao(K)):d=j.center?H?e?ao(K):ao(K,!0):e?ao(K):[j.c1,j.c2]:e?ao(K):ao(K,!0),p=new E(p?p._as:L),p.add(d[0],0),p.add(d[1]),p},vc=function(s){return s=new E(s._as),s.removeAt(0),s.removeAt(s.size()-1),s},ek=function(u){u._as||(u=new E(u));var B=new E;B.add(1);for(var y=1;y<u.size();y++)B.add(2);return B},og=function(M,R){return{x:(M.x+R.x)/2,y:(M.y+R.y)/2}},Gh=function(f,h){return{x:f.x+1*(h.x-f.x)/4,y:f.y+1*(h.y-f.y)/4}},_k=function(s,T){return{x:s.x+3*(T.x-s.x)/4,y:s.y+3*(T.y-s.y)/4}},zo=function(v,u,P,Z){var z=u.x+u.width/2,s=u.y+u.height/2,G=x(z*z+s*s),g=F(s,z)+P;return{x:Z.x+G*q(g),y:Z.y+G*A(g)}},om=K.validateImpl,_n=K.isRectEditable,uj=K.isPointEditable,Pe=K._42,pd=c._79o,Mc=u._79o,Fi=c._48O,Ji=c._47O,wm=o._48O,si=o._80o,oi=c._80o,Zq=o.getSelectWidth,Qc=o._47O,Gp=u._47O,Sc=K.isEditable,Bg=["northwest","north","northeast","east","southeast","south","southwest","west"],Rn=function(k,I,Q,t,i,M,O,g,z,a){var y=k.x,q=k.y,E=k.width,u=k.height,o={x:y+E/2,y:q+u/2};t=t||0,I=lo(o,I.x-o.x,I.y-o.y,-t),O&&!g&&(I.x+=z,I.y+=a);var U=.01;if("northwest"===Q?(I.x+i>y+E-U&&(I.x=y+E-i-U),I.y+i>q+u-U&&(I.y=q+u-i-U),k=w(I,{x:y+E,y:q+u})):"north"===Q?(I.y+i>q+u-U&&(I.y=q+u-i-U),k=w({x:y,y:I.y},{x:y+E,y:q+u})):"northeast"===Q?(I.x<y+i+U&&(I.x=y+i+U),I.y+i>q+u-U&&(I.y=q+u-i-U),k=w({x:y,y:I.y},{x:I.x,y:q+u})):"west"===Q?(I.x+i>y+E-U&&(I.x=y+E-i-U),k=w({x:I.x,y:q},{x:y+E,y:q+u})):"east"===Q?(I.x<y+i+U&&(I.x=y+i+U),k=w({x:y,y:q},{x:I.x,y:q+u})):"southwest"===Q?(I.x+i>y+E-U&&(I.x=y+E-i-U),I.y<q+i+U&&(I.y=q+i+U),k=w({x:I.x,y:q},{x:y+E,y:I.y})):"south"===Q?(I.y<q+i+U&&(I.y=q+i+U),k=w({x:y,y:q},{x:y+E,y:I.y})):"southeast"===Q&&(I.x<y+i+U&&(I.x=y+i+U),I.y<q+i+U&&(I.y=q+i+U),k=w({x:y,y:q},I)),"keepRatio"===M&&(!O&&g||O&&!g)&&("northeast"===Q||"southeast"===Q||"northwest"===Q||"southwest"===Q)){var f=k.width,c=k.height,b=f/E,P=c/u,G=V(b,P);k.width=E*G,k.height=u*G,"northeast"===Q?k.y=q+(u-k.height):"northwest"===Q?(k.y=q+(u-k.height),k.x=y+(E-k.width)):"southwest"===Q&&(k.x=y+(E-k.width))}k.x-=o.x,k.y-=o.y;var l=zo(L,k,t,o);return k.x=l.x-k.width/2,k.y=l.y-k.height/2,k},xc=function(s,R,G,z){var T=s.getRotation(),p=R,P=p.x,k=p.y,H=p.width,t=p.height,Y={x:P+p.width/2,y:k+p.height/2};z=lo(Y,z.x-Y.x,z.y-Y.y,-T),"northwest"===G?p=w(z,{x:P+H,y:k+t}):"north"===G?p=w({x:P,y:z.y},{x:P+H,y:k+t}):"northeast"===G?p=w({x:P,y:z.y},{x:z.x,y:k+t}):"west"===G?p=w({x:z.x,y:k},{x:P+H,y:k+t}):"east"===G?p=w({x:P,y:k},{x:z.x,y:k+t}):"southwest"===G?p=w({x:z.x,y:k},{x:P+H,y:z.y}):"south"===G?p=w({x:P,y:k},{x:P+H,y:z.y}):"southeast"===G&&(p=w({x:P,y:k},z)),s.setRect(p),p.x-=Y.x,p.y-=Y.y;var o=zo(s,p,T,Y);s.p(o.x,o.y)},qi=function(k,P,e,M,g,l,I,d){var j=L;l?(j=lo(L,g.x-P.x,g.y-P.y,-e),j.x-=I.x,j.y-=I.y):j=lo(L,g.x-P.x,g.y-P.y,0);var W={x:P.x+j.x,y:P.y+j.y};d&&(W=d(W.x,W.y)),W.e=k.getPoints().get(M).e,k.setPoint(M,W);var A=k.getWidth(),x=k.getHeight(),F=k.p().x-A/2,Q=k.p().y-x/2;F-=P.x,Q-=P.y;var c=zo(k,{x:F,y:Q,width:A,height:x},e,P);k.p(c.x,c.y)},Jm=function(N,P,D){var d,O;if(N instanceof U?(d=N.getPoints(),O=N.getSegments()):N instanceof m&&"points"===N.s("edge.type")&&(d=N.s("edge.points"),O=N.s("edge.segments"),d=Nj(P,d)),O&&O.size()||(O=ek(d)),N instanceof U&&N.isClosePath()&&O.indexOf(5)<0&&(O=new E(O._as),O.add(5)),O)for(var i=-1,G=0;G<O.size();G++){if(G===D)return i;var T=O.get(G);1===T?i+=1:2===T?i+=1:3===T?i+=2:4===T&&(i+=3)}},Pn=function(F,K,h){var C,k;if(F instanceof U?(C=F.getPoints(),k=F.getSegments()):F instanceof m&&"points"===F.s("edge.type")&&(C=F.s("edge.points"),k=F.s("edge.segments"),C=Nj(K,C)),k&&k.size()||(k=ek(C)),k)for(var x=-1,B=0;B<k.size();B++){var o=k.get(B);if(1===o?x+=1:2===o?x+=1:3===o?x+=2:4===o&&(x+=3),x===h)return B}},Kf=function($,z){var b=[$[0]-z[0],$[1]-z[1],$[2]-z[2]];return b},cn=function(){var C=new T(16);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C},Rj=function(z,r){var R=z[0],k=z[1],c=z[2];return z[0]=r[0]*R+r[4]*k+r[8]*c+r[12],z[1]=r[1]*R+r[5]*k+r[9]*c+r[13],z[2]=r[2]*R+r[6]*k+r[10]*c+r[14],z},Lh=function(s,t){if(t){var o=A(t),l=q(t),d=s[0],F=s[1],i=s[2],H=s[3],b=s[8],N=s[9],u=s[10],I=s[11];s[0]=d*l-b*o,s[1]=F*l-N*o,s[2]=i*l-u*o,s[3]=H*l-I*o,s[8]=d*o+b*l,s[9]=F*o+N*l,s[10]=i*o+u*l,s[11]=H*o+I*l}},ig=function(F,X){for(var x=F.s("grid.row.count"),e=F.s("grid.column.count"),j=0;x>j;j++)for(var Z=0;e>Z;Z++){var i=F.getCellRect(j,Z);if(B(i,X))return{rowIndex:j,columnIndex:Z,rect:i,grid:F}}return null},Gd=function(t,z,W,q,L,f){var w={},k=W-t,a=q-z,X=v.sqrt(k*k+a*a),i=k/X,G=a/X,m=(-t+L)*i+(-z+f)*G;return 0>=m?(w.x=t,w.y=z):m>=X?(w.x=W,w.y=q):(w.x=t+m*i,w.y=z+m*G),k=L-w.x,a=f-w.y,w.z=v.sqrt(k*k+a*a),w},zf=function(l,b){var K,F,c,C,m,V,X,I,U=l.getPoints(),D=l.getSegments(),e=l.p(),N=l.getRotation();if(!D||!(D.indexOf(3)>0||D.indexOf(4)>0)){for(I=0;I<=U.size()-1;I++)if(I===U.size()-1?(m=U.get(0),C=U.get(I)):(C=U.get(I),m=U.get(I+1)),C=lo(e,C.x-e.x,C.y-e.y,N),m=lo(e,m.x-e.x,m.y-e.y,N),V=Gd(C.x,C.y,m.x,m.y,b.x,b.y),X=V.z,X<(l.s("shape.border.width")||10)){F=C,c=m,K=I;break}if(K!=L){var q=Gd(F.x,F.y,c.x,c.y,b.x,b.y),Z=k(F,q);return{attachIndex:K,attachOffset:Z}}}},al=function(O){for(var W=O._data,Q=W.p(),t=W.getRotation(),N=W.getPoints(),$=L,u=[],A=0;A<N.size();A++)$=N.get(A),u.push(lo(Q,$.x-Q.x,$.y-Q.y,t));O._55O.$15l=u};I.setImage("xeditinteractor_parentIcon",O),I.setImage("xeditinteractor_hostIcon",X),I.setImage("xeditinteractor_edgeIcon",f),I.setImage("xeditinteractor_removeIcon",Zd),I.setImage("xeditinteractor_sourceIcon",_o),I.setImage("xeditinteractor_targetIcon",Qf),I.setImage("xeditinteractor_elevationIcon",Pq),I.setImage("xeditinteractor_tallIcon",Jo),K._editPointSize=S?24:9,K._edgeHelpers=["parent","remove","source","target"],K._leftTopHelpers=["parent"],K._rightTopHelpers=["host"],K._leftBottomHelpers=["edge"],K._rightBottomHelpers=["remove"],Bg=Bg.concat(Bg).concat(Bg),u._79o=function(){var U=this,G=U.gv,W=G.getZoom(),K=G._editInteractor,N=Mc.call(U);if(!N)return null;var d=ao(U,!0),y=d[0],_=d[1],S={x:N.x,y:N.y,width:N.width,height:N.height},k=w(y,_);if(K instanceof Q.XEditInteractor){S=D(S,k);var u=U._55O,l=G.getEditPointSize()/W+2,Z=0;u&&u._43O&&(Z+=l/2,H(S,Z))}return S},u._47O=function(R){var _=this,p=_.gv,f=p._editInteractor;f instanceof Q.XEditInteractor||Gp.call(_,R)},u.rectIntersects=function(V){var J=this,Z=J._data,g=J.gv,H=g.getZoom(),y=J._55O,C=g._editInteractor;if(C instanceof Q.XEditInteractor&&g.isEditable(Z)&&y&&y._43O&&"points"===Z.s("edge.type")){var z=Z.s("edge.points"),I=Z.s("edge.segments");z=Nj(J,z),I&&I.size()||(I=ek(z)),z=z._as;var f=!1,X=S?5:1,E=V.x+X,j=V.y+X,U={x:E,y:j};if(C._edge===Z&&C._hoverSegmentIndex>=0){var v=g._editInteractor._hoverSegmentIndex,q=I.get(v),A=Jm(Z,J,v),G=L;if(A!=L&&A>=0){var o=z[A],T=g.getSegmentHoverWidth()/H;if(2===q||1===q){var h=z[A+1];G=en(new Lp(o.x,o.y),new Lp(h.x,h.y),new Lp(U.x-T,U.y-T),new Lp(U.x+2*T,U.y+2*T)),G.$62l===n&&(f=!0)}else if(3===q){var x=z[A+1],h=z[A+2];G=ac(new Lp(o.x,o.y),new Lp(x.x,x.y),new Lp(h.x,h.y),new Lp(U.x-T,U.y-T),new Lp(U.x+2*T,U.y+2*T)),G.$62l===n&&(f=!0)}else if(4===q){var m=z[A+1],K=z[A+2];h=z[A+3],G=Yn(new Lp(o.x,o.y),new Lp(m.x,m.y),new Lp(K.x,K.y),new Lp(h.x,h.y),new Lp(U.x-T,U.y-T),new Lp(U.x+2*T,U.y+2*T)),G.$62l===n&&(f=!0)}}}if(f)return!0}return L},c._47O=function(n){var G=this,x=G.gv,u=x._editInteractor;u instanceof Q.XEditInteractor||Ji.call(G,n)},c.rectIntersects=function(Z){var K=this,m=K._data,D=K.gv,k=D.getZoom(),q=K._55O,F=D._editInteractor;if(F instanceof Q.XEditInteractor&&D.isEditable(m)&&q&&q._43O){var i=q.$15l,s=!1,l=S?5:1,e=Z.x+l,U=Z.y+l,x={x:e,y:U};if(i&&i.length===m.getPoints().size()||(al(K),i=q.$15l),F._shape===m&&F._hoverSegmentIndex>=0){var $=m.getSegments();$&&$.size()||($=ek(i));var I=D._editInteractor._hoverSegmentIndex,w=$.get(I),R=Jm(m,K,I),B=L;if(R!=L&&R>=0){var A=i[R],y=D.getSegmentHoverWidth()/k;if(2===w||1===w){var a=i[R+1];B=en(new Lp(A.x,A.y),new Lp(a.x,a.y),new Lp(x.x-y,x.y-y),new Lp(x.x+2*y,x.y+2*y)),B.$62l===n&&(s=!0)}else if(3===w){var C=i[R+1],a=i[R+2];B=ac(new Lp(A.x,A.y),new Lp(C.x,C.y),new Lp(a.x,a.y),new Lp(x.x-y,x.y-y),new Lp(x.x+2*y,x.y+2*y)),B.$62l===n&&(s=!0)}else if(4===w){var h=i[R+1],G=i[R+2];a=i[R+3],B=Yn(new Lp(A.x,A.y),new Lp(h.x,h.y),new Lp(G.x,G.y),new Lp(a.x,a.y),new Lp(x.x-y,x.y-y),new Lp(x.x+2*y,x.y+2*y)),B.$62l===n&&(s=!0)}}}if(s)return!0}return L},c._48O=function(){var d=this,z=d.gv,y=z._editInteractor;y instanceof Q.XEditInteractor?(o._48O.call(d),d._55O._43O&&al(d)):Fi.call(d)},c._79o=function(){var Y=this,y=Y.gv,v=y.getZoom(),u=y._editInteractor,S=pd.call(Y);if(S){var E={x:S.x,y:S.y,width:S.width,height:S.height};if(u instanceof Q.XEditInteractor){var G=Y._55O,A=y.getEditPointSize()/v+2,B=0;G&&G._43O&&(B+=A/2,H(E,B))}return E}},o._47O=function(o){var c=this,f=c.gv,B=f._editInteractor;if(B instanceof Q.XEditInteractor);else{var F=c._55O;F&&F._98o&&Qc.call(c,o)}},o.getSelectWidth=function(){var K=this,U=K.gv,A=U._editInteractor,O=K._data;return U.isEditable(O)&&A instanceof Q.XEditInteractor?0:Zq.call(K)},o._80o=function(A){var B=this,o=B.gv._editInteractor;if(si.call(B,A),o&&o._debug){A.save(),A.beginPath(),A.lineWidth=1,A.strokeStyle="green";var V=B._79o();V&&(A.rect(V.x,V.y,V.width,V.height),A.stroke()),A.restore()}},c._80o=function(D){var Z=this,t=Z.gv._editInteractor;if(oi.call(Z,D),t&&t._debug){D.save(),D.beginPath(),D.lineWidth=1,D.strokeStyle="green";var u=Z._79o();D.rect(u.x,u.y,u.width,u.height),D.stroke(),D.restore()}},o._48O=function(){var n=this,$=n.gv,S=n._data,T=$._editInteractor,A=n._55O,V=S.p(),R=S.getRotation();if(T instanceof Q.XEditInteractor){if(A._42O){var m=od(V,S.getWidth(),S.getHeight(),R),k=m[0],U=m[1],c=m[2],_=m[3],y=m[4],l=m[5],F=m[6],Z=m[7];A.$45l=[k,y,U,l,_,F,c,Z]}}else wm.call(n)},K.getResizeMode=function(){return this.$25l||"normal"},K.setResizeMode=function(H){var c=this.$25l;this.$25l=H,this.fp("resizeMode",c,H)},K.getSnapAngle=function(){return this.$26l||Math.PI/36},K.setSnapAngle=function(V){var O=this.$26l;this.$26l=V,this.fp("snapAngle",O,V)},K.getSnapSpacing=function(){return this.$27l},K.setSnapSpacing=function(Y){var U=this.$27l;this.$27l=Y,this.fp("snapSpacing",U,Y)},K.getPointSnapSpacing=function(){return this._pointSnapSpacing},K.setPointSnapSpacing=function(Z){var D=this._pointSnapSpacing;this._pointSnapSpacing=Z,this.fp("pointSnapSpacing",D,Z)},K.setHelperEditableFunc=function(j){var q=this._helperEditableFunc;this._helperEditableFunc=j,this.fp("helperEditableFunc",q,j)},K.getHelperEditableFunc=function(){return this._helperEditableFunc},K.setLeftTopHelpers=function(u){var J=this._leftTopHelpers;this._leftTopHelpers=u,this.fp("leftTopHelpers",J,u)},K.getLeftTopHelpers=function(){return this._leftTopHelpers},K.setLeftTopHelpersAlign=function(W){var Q=this._leftTopHelpersAlign;this._leftTopHelpersAlign=W,this.fp("leftTopHelpersAlign",Q,W)},K.getLeftTopHelpersAlign=function(){return this._leftTopHelpersAlign},K.setRightTopHelpers=function(k){var S=this._rightTopHelpers;this._rightTopHelpers=k,this.fp("rightTopHelpers",S,k)},K.getRightTopHelpers=function(){return this._rightTopHelpers},K.setRightTopHelpersAlign=function(e){var Z=this._rightTopHelpersAlign;this._rightTopHelpersAlign=e,this.fp("rightTopHelpersAlign",Z,e)},K.getRightTopHelpersAlign=function(){return this._rightTopHelpersAlign},K.setLeftBottomHelpers=function(W){var E=this._leftBottomHelpers;this._leftBottomHelpers=W,this.fp("leftBottomHelpers",E,W)},K.getLeftBottomHelpers=function(){return this._leftBottomHelpers},K.setLeftBottomHelpersAlign=function(l){var W=this._leftBottomHelpersAlign;this._leftBottomHelpersAlign=l,this.fp("leftBottomHelpersAlign",W,l)},K.getLeftBottomHelpersAlign=function(){return this._leftBottomHelpersAlign},K.setRightBottomHelpers=function(p){var $=this._rightBottomHelpers;this._rightBottomHelpers=p,this.fp("rightBottomHelpers",$,p)},K.getRightBottomHelpers=function(){return this._rightBottomHelpers},K.setRightBottomHelpersAlign=function(l){var a=this._rightBottomHelpersAlign;this._rightBottomHelpersAlign=l,this.fp("rightBottomHelpersAlign",a,l)},K.getRightBottomHelpersAlign=function(){return this._rightBottomHelpersAlign},K.setEdgeHelpers=function(F){var y=this._edgeHelpers;this._edgeHelpers=F,this.fp("edgeHelpers",y,F)},K.getEdgeHelpers=function(){return this._edgeHelpers},K.isHelperEditable=function(y,T){return y instanceof m&&("host"===T||"edge"===T||"elevation"===T||"tall"===T)?!1:y instanceof i&&("source"===T||"target"===T)?!1:"pointElevation"===T?this._helperEditableFunc?this._helperEditableFunc(y,T):!1:this._helperEditableFunc?this._helperEditableFunc(y,T):!0},K.getEditHelperSize=function(){return this._editHelperSize||(S?28:16)},K.setEditHelperSize=function(T){var t=this._editHelperSize;this._editHelperSize=T,this.fp("editHelperSize",t,T)},K.getEditRectBorderColor=function(){return this.$28l||"rgb(0, 168, 255)"},K.setEditRectBorderColor=function(q){var B=this.$28l;this.$28l=q,this.fp("editRectBorderColor",B,q)},K.getNodeBorderColor=function(){return this.$29l||"#1ABC9C"},K.setNodeBorderColor=function($){var G=this.$29l;this.$29l=$,this.fp("nodeBorderColor",G,$)},K.getEditRectBorderStyle=function(){return this.$30l||"dashed"},K.setEditRectBorderStyle=function(o){var L=this.$30l;this.$30l=o,this.fp("editRectBorderStyle",L,o)},K.getControlPointBackground=function(){return this.$31l||"#ff0"},K.setControlPointBackground=function(O){var c=this.$31l;this.$31l=O,this.fp("controlPointBackground",c,O)},K.getControlPointBorderColor=function(){return this.$32l||this._editPointBorderColor},K.setControlPointBorderColor=function(a){var p=this.$32l;this.$32l=a,this.fp("controlPointBorderColor",p,a)},K.getJoinPointBackground=function(){return this.$33l||this._editPointBackground},K.setJoinPointBackground=function(E){var S=this.$33l;this.$33l=E,this.fp("joinPointBackground",S,E)},K.getJoinPointBorderColor=function(){return this.$34l||this._editPointBorderColor},K.setJoinPointBorderColor=function(M){var Y=this.$34l;this.$34l=M,this.fp("joinPointBorderColor",Y,M)},K.getDirectionLineColor=function(){return this.$35l||"#888"},K.setDirectionLineColor=function(e){var y=this.$35l;this.$35l=e,this.fp("directionLineColor",y,e)},K.getSegmentHoverColor=function(){return this.$36l||"rgba(255, 0, 0, 0.3)"},K.setSegmentHoverColor=function(R){var Q=this.$36l;this.$36l=R,this.fp("segmentHoverColor",Q,R)},K.getSegmentHoverWidth=function(){return this.$22l||(S?16:8)},K.setSegmentHoverWidth=function(A){var w=this.$22l;this.$22l=A,this.fp("segmentHoverWidth",w,A)},K.getSnapPointBorderColor=function(){return this.$38l||"#f00"},K.setSnapPointBorderColor=function(Y){var H=this.$38l;this.$38l=Y,this.fp("snapPointBorderColor",H,Y)},K.getEditRectPadding=function(){return this.$39l!=L?this.$39l:6},K.setEditRectPadding=function(Y){var p=this.$39l;this.$39l=Y,this.fp("editRectPading",p,Y)},K.isRectEditable=function(V){var L=this,k=L._editInteractor;return k instanceof Q.XEditInteractor?L._rectEditableFunc?L._rectEditableFunc(V):!0:_n.call(L,V)},K.isPointEditable=function(y){var k=this,t=k._editInteractor;return t instanceof Q.XEditInteractor?k._pointEditableFunc?k._pointEditableFunc(y):!0:uj.call(k,y)},K.validateImpl=function(){var M=this,L=M.$14l,P=M._editInteractor;if(L){var c=M.getWidth(),u=M.getHeight();(c!==L.clientWidth||u!==L.clientHeight)&&(P&&(P._68I=1),Z.setCanvas(L,c,u),M._32I=1)}om.call(this)},K.isEditable=function(A){var T=Sc.call(this,A),u=this._editInteractor;if(u instanceof Q.XEditInteractor&&A instanceof m){if(!A.s("2d.editable"))return!1;var j=this.getEditableFunc();T=j?j(A):!0}return T},K._42=function(A,m){var o=this,x=o._editInteractor;Pe.call(o,A,m),x instanceof Q.XEditInteractor&&x._68I&&x._42()},K.isSnapPoint=function(){return!0};var bd=function(F){arguments.length>0&&this.$58l(F)},sk=bd.prototype;sk.$58l=function(S){this.$62l=S,this.points=new Array},sk.$56l=function(n){this.points.push(n)},sk.$57l=function(K){this.points=this.points.concat(K)};var Lp=function(n,r){arguments.length>0&&this.$58l(n,r)},qd=Lp.prototype;qd.$58l=function(M,V){this.x=M,this.y=V},qd.add=function(q){return new Lp(this.x+q.x,this.y+q.y)},qd.addEquals=function(q){return this.x+=q.x,this.y+=q.y,this},qd.$55l=function(Q){return new Lp(this.x*Q,this.y*Q)},qd.eq=function(C){return this.x==C.x&&this.y==C.y},qd.lt=function(D){return this.x<D.x&&this.y<D.y},qd.lte=function(_){return this.x<=_.x&&this.y<=_.y},qd.gt=function(w){return this.x>w.x&&this.y>w.y},qd.gte=function(T){return this.x>=T.x&&this.y>=T.y},qd.lerp=function(B,R){return new Lp(this.x+(B.x-this.x)*R,this.y+(B.y-this.y)*R)},qd.distanceFrom=function(N){var F=this.x-N.x,D=this.y-N.y;return x(F*F+D*D)},qd.min=function(p){return new Lp(V(this.x,p.x),V(this.y,p.y))},qd.max=function(y){return new Lp($(this.x,y.x),$(this.y,y.y))},qd.toString=function(){return this.x+","+this.y};var hc=function(){this.$58l(arguments)},xr=hc.prototype;hc.TO=1e-6,hc.AC=6,xr.$58l=function(P){this.co=new Array;for(var q=P.length-1;q>=0;q--)this.co.push(P[q])},xr.$55l=function(u){for(var M=new hc,x=0;x<=this.$50l()+u.$50l();x++)M.co.push(0);for(var x=0;x<=this.$50l();x++)for(var q=0;q<=u.$50l();q++)M.co[x+q]+=this.co[x]*u.co[q];return M},xr.$59l=function(){for(var J=this.$50l();J>=0&&M(this.co[J])<=hc.TO;J--)this.co.pop()},xr.$50l=function(){return this.co.length-1},xr.$51l=function(){var N;switch(this.$59l(),this.$50l()){case 0:N=new Array;break;case 1:N=this.$52l();break;case 2:N=this.$53l();break;case 3:N=this.$54l();break;case 4:N=this.$63l();break;default:N=new Array}return N},xr.$52l=function(){var $=new Array,A=this.co[1];return 0!=A&&$.push(-this.co[0]/A),$},xr.$53l=function(){var w=new Array;if(2==this.$50l()){var D=this.co[2],t=this.co[1]/D,E=this.co[0]/D,P=t*t-4*E;if(P>0){var r=x(P);w.push(.5*(-t+r)),w.push(.5*(-t-r))}else 0==P&&w.push(.5*-t)}return w},xr.$63l=function(){var J=new Array;if(4==this.$50l()){var w=this.co[4],a=this.co[3]/w,i=this.co[2]/w,R=this.co[1]/w,L=this.co[0]/w,A=new hc(1,-i,a*R-4*L,-a*a*L+4*i*L-R*R).$54l(),Q=A[0],C=a*a/4-i+Q;if(M(C)<=hc.TO&&(C=0),C>0){var D=x(C),n=3*a*a/4-D*D-2*i,Z=(4*a*i-8*R-a*a*a)/(4*D),c=n+Z,k=n-Z;if(M(c)<=hc.TO&&(c=0),M(k)<=hc.TO&&(k=0),c>=0){var $=x(c);J.push(-a/4+(D+$)/2),J.push(-a/4+(D-$)/2)}if(k>=0){var $=x(k);J.push(-a/4+($-D)/2),J.push(-a/4-($+D)/2)}}else if(0>C);else{var Z=Q*Q-4*L;if(Z>=-hc.TO){if(0>Z&&(Z=0),Z=2*x(Z),n=3*a*a/4-2*i,n+Z>=hc.TO){var e=x(n+Z);J.push(-a/4+e/2),J.push(-a/4-e/2)}if(n-Z>=hc.TO){var e=x(n-Z);J.push(-a/4+e/2),J.push(-a/4-e/2)}}}}return J},xr.$54l=function(){var t=new Array;if(3==this.$50l()){var d=this.co[3],D=this.co[2]/d,u=this.co[1]/d,R=this.co[0]/d,p=(3*u-D*D)/3,i=(2*D*D*D-9*u*D+27*R)/27,V=D/3,k=i*i/4+p*p*p/27,e=i/2;if(M(k)<=hc.TO&&(k=0),k>0){var m,S,C=x(k);m=-e+C,S=m>=0?r(m,1/3):-r(-m,1/3),m=-e-C,m>=0?S+=r(m,1/3):S-=r(-m,1/3),t.push(S-V)}else if(0>k){var K=x(-p/3),Q=F(x(-k),-e)/3,P=q(Q),s=A(Q),Y=x(3);t.push(2*K*P-V),t.push(-K*(P+Y*s)-V),t.push(-K*(P-Y*s)-V)}else{var m;m=e>=0?-r(e,1/3):r(-e,1/3),t.push(2*m-V),t.push(-m-V)}}return t};var wk=function(w,G){arguments.length>0&&this.$58l(w,G)},Zk=wk.prototype;Zk.$58l=function(c,m){this.x=c,this.y=m},Zk.length=function(){return x(this.x*this.x+this.y*this.y)},Zk.$60l=function(s){return this.x*s.x+this.y*s.y};var Wj=function(S,c,Q,q){var E,R=(q.x-Q.x)*(S.y-Q.y)-(q.y-Q.y)*(S.x-Q.x),$=(c.x-S.x)*(S.y-Q.y)-(c.y-S.y)*(S.x-Q.x),i=(q.y-Q.y)*(c.x-S.x)-(q.x-Q.x)*(c.y-S.y);if(0!=i){var w=R/i,W=$/i;w>=0&&1>=w&&W>=0&&1>=W?(E=new bd(n),E.points.push(new Lp(S.x+w*(c.x-S.x),S.y+w*(c.y-S.y)))):E=new bd(Y)}else E=0==R||0==$?new bd("C"):new bd("P");return E},Tn=function(L,O,J,U,F){var k,r,x,S,z,c,K,l=U.min(F),P=U.max(F),h=new bd(Y);k=O.$55l(-2),x=L.add(k.add(J)),k=L.$55l(-2),r=O.$55l(2),S=k.add(r),z=new Lp(L.x,L.y),K=new wk(U.y-F.y,F.x-U.x),c=U.x*F.y-F.x*U.y;for(var d=new hc(K.$60l(x),K.$60l(S),K.$60l(z)+c).$51l(),Q=0;Q<d.length;Q++){var Z=d[Q];if(Z>=0&&1>=Z){var I=L.lerp(O,Z),m=O.lerp(J,Z),X=I.lerp(m,Z);U.x==F.x?l.y<=X.y&&X.y<=P.y&&(h.$62l=n,h.$56l(X)):U.y==F.y?l.x<=X.x&&X.x<=P.x&&(h.$62l=n,h.$56l(X)):X.gte(l)&&X.lte(P)&&(h.$62l=n,h.$56l(X))}}return h},ac=function(i,B,g,h,P){var O=h.min(P),S=h.max(P),$=new Lp(S.x,O.y),F=new Lp(O.x,S.y),t=Tn(i,B,g,O,$),o=Tn(i,B,g,$,S),D=Tn(i,B,g,S,F),k=Tn(i,B,g,F,O),Q=new bd(Y);return Q.$57l(t.points),Q.$57l(o.points),Q.$57l(D.points),Q.$57l(k.points),Q.points.length>0&&(Q.$62l=n),Q},Sb=function(v,y,K,T,W,$){var o,f,N,r,p,w,q,U,e,G,k=W.min($),i=W.max($),m=new bd(Y);o=v.$55l(-1),f=y.$55l(3),N=K.$55l(-3),r=o.add(f.add(N.add(T))),p=new wk(r.x,r.y),o=v.$55l(3),f=y.$55l(-6),N=K.$55l(3),r=o.add(f.add(N)),w=new wk(r.x,r.y),o=v.$55l(-3),f=y.$55l(3),N=o.add(f),q=new wk(N.x,N.y),U=new wk(v.x,v.y),G=new wk(W.y-$.y,$.x-W.x),e=W.x*$.y-$.x*W.y;for(var E=new hc(G.$60l(p),G.$60l(w),G.$60l(q),G.$60l(U)+e).$51l(),s=0;s<E.length;s++){var C=E[s];if(C>=0&&1>=C){var Q=v.lerp(y,C),A=y.lerp(K,C),S=K.lerp(T,C),u=Q.lerp(A,C),b=A.lerp(S,C),L=u.lerp(b,C);W.x==$.x?k.y<=L.y&&L.y<=i.y&&(m.$62l=n,m.$56l(L)):W.y==$.y?k.x<=L.x&&L.x<=i.x&&(m.$62l=n,m.$56l(L)):L.gte(k)&&L.lte(i)&&(m.$62l=n,m.$56l(L))}}return m},Yn=function(I,V,D,B,R,j){var Q=R.min(j),b=R.max(j),M=new Lp(b.x,Q.y),f=new Lp(Q.x,b.y),w=Sb(I,V,D,B,Q,M),N=Sb(I,V,D,B,M,b),m=Sb(I,V,D,B,b,f),O=Sb(I,V,D,B,f,Q),C=new bd(Y);return C.$57l(w.points),C.$57l(N.points),C.$57l(m.points),C.$57l(O.points),C.points.length>0&&(C.$62l=n),C},en=function(M,t,b,U){var s=b.min(U),G=b.max(U),e=new Lp(G.x,s.y),h=new Lp(s.x,G.y),D=Wj(s,e,M,t),J=Wj(e,G,M,t),A=Wj(G,h,M,t),F=Wj(h,s,M,t),O=new bd(Y);return O.$57l(D.points),O.$57l(J.points),O.$57l(A.points),O.$57l(F.points),O.points.length>0&&(O.$62l=n),O},Rm=Q.XEditInteractor=function(M){var d=this,S=d._view=document.createElement("canvas");S.className="editCanvas",S.style.position="absolute",Rm.superClass.constructor.call(d,M)};I.def(Rm,Q.Interactor,{ms_edit:1,setUp:function(){var v=this,d=v.gv,x=d.getView(),y=v._view;Rm.superClass.setUp.call(v),d.setEditInteractor(v),d.$14l=y,d._79O?x.insertBefore(y,d._79O):x.appendChild(y);var Q=v.$49l=v.$11l.bind(v);d.dm().md(Q),d.sm().ms(Q),d.mp(Q)},tearDown:function(){var C=this,B=C.gv,x=B.getView(),m=C.$49l;Rm.superClass.tearDown.call(C),B.setEditInteractor(L),B.$14l=L,x.removeChild(C._view),B.dm().umd(m),B.sm().ums(m),B.ump(m)},clear:function(){var e=this,T=e.gv;delete e._hoverSegmentIndex,delete e._edge,delete e._shape,delete T._editing,delete e.$10l,delete e.$13l,delete e.$9l,delete e._removePointIndex,delete e._lp,e.$12l="",delete e.$40l,delete e.$67l,delete e.$72l,delete e.$73l,delete e.$75l,delete e.$1l,delete e.$3l,delete e.$2l,delete e.$92l,delete e.$93l,delete e.$94l,e.clearDragging()},handle_keydown:function(U){this.$48l!==U.shiftKey&&(this.$48l=U.shiftKey,this.handle_mousemove(U,e,!0))},handle_keyup:function(a){this.$48l!==a.shiftKey&&(this.$48l=a.shiftKey,this.handle_mousemove(a,e,!0))},handle_touchstart:function(r){this.handle_mousemove(r),this.handle_mousedown(r)},handle_mousedown:function(O){l(O);var G=this,T=G.$13l,Z=G.gv,R=Z.dm(),j=Z.sm(),b=Z.getZoom(),$=Z.lp(O),r=I.isDoubleClick(O),u=I.isLeftButton(O),v=G.$7l,C=G._shape,g=G._hoverSegmentIndex,p=G._edge,a=G.$87l,d=G.$88l,S=function(){G._68I||a===G.$87l&&d===G.$88l||G.$43l()};if(7!==G.$67l&&(delete G.$87l,delete G.$88l),u&&(C||p)&&g>=0&&r&&(C&&j.contains(C)||p&&j.contains(p))){var z=El.call(G,C||p,g,$);return G.addShapePoint(C||p,g,z),t(function(){G.handle_mousemove(O)},40),void 0}if(u&&(C||p)&&G._removePointIndex>=0&&r)return G.removeShapePoint(),G.$5l=1,t(function(){G.handle_mousemove(O)},40),void 0;if(!u||!Z._editing)return S(),void 0;if(C&&T>=0){var y=C.getPoints().get(T),X=C.p(),E=lo(X,y.x-X.x,y.y-X.y,-v+C.getRotation());o=lo(X,$.x-X.x,$.y-X.y,-v),G.$24l={x:o.x-E.x,y:o.y-E.y},G.startDragging(O),R.beginTransaction(),G.fi({kind:"beginEditPoint",event:O,data:C,index:T}),G.$88l=T,G.$87l=C}else if(G.$10l){var n=Z.sm().getSelection(),D=G.$6l,m=G.$1l={},e=G.$3l={},K=G.$16l[h[G.$10l]],H={x:D.x,y:D.y},J={x:D.x+D.width/2,y:D.y+D.height/2};G.$24l={x:$.x-K.x/b,y:$.y-K.y/b},G.$2l=s(G.$8l),G.$4l=s(D),n.each(function(K){if(K instanceof i){var d=K.p(),h=K.getWidth(),n=K.getHeight(),C=lo(J,d.x-J.x,d.y-J.y,-v);m[K.getId()]={x:d.x-h/2,y:d.y-n/2,width:h,height:n},e[K.getId()]={x:(C.x-H.x)/D.width,y:(C.y-H.y)/D.height}}}),G.startDragging(O),R.beginTransaction(),G.fi({kind:"beginEditRect",event:O,direction:G.$10l})}else if(p&&T>=0){var N=Nj(Z.getDataUI(p),p.s("edge.points")),y=N.get(T);G.$24l={x:$.x-y.x,y:$.y-y.y},G.startDragging(O),R.beginTransaction(),G.fi({kind:"beginEditPoint",event:O,data:p,index:T}),G.$88l=T,G.$87l=p}else if(G.$40l){var D=G.$6l,J={x:D.x+D.width/2,y:D.y+D.height/2},L=s(G.$23l);L.x/=b,L.y/=b;var A=lo(J,L.x-J.x,L.y-J.y,-v),o=lo(J,$.x-J.x,$.y-J.y,-v);G.$24l={x:o.x-A.x,y:o.y-A.y},G.startDragging(O),R.beginTransaction(),G.fi({kind:"beginEditRotation",event:O,data:G._rotationNode})}else if([1,2,3,5,6,7,8,9].indexOf(G.$67l)>=0){var c=G.$67l;(7===c||8===c||9===c)&&R.beginTransaction(),G.startDragging(O)}else if(G.$71l&&r&&G.$79l(G.$71l,$)){var U=j.toSelection();R.beginTransaction(),U.each(function(p){R.remove(p)}),R.endTransaction()}S()},$11l:function(){var $=this,z=$.gv;z._editing&&($.$13l==L||$._shape==L&&$._edge==L)&&($.$73l==L||1!==$.$67l&&5!==$.$67l&&6!==$.$67l)||($.$5l=1),$._68I=1},$46l:function(D){var S=this,j=S.gv,r=j.lp(D),d=[];return Qb(j,function(V){var k=j.getDataUI(V);if(k){var S=k._79o();B(S,r)&&d.push(V)}}),d},$47l:function(X){var e=this,Y=e.$13l,R=e.gv.dm();e.$10l?(e.fi({kind:"endEditRect",event:X,direction:e.$10l}),R.endTransaction()):e._shape&&Y>=0?(e.fi({kind:"endEditPoint",event:X,data:e._shape,index:Y}),R.endTransaction()):e._edge&&Y>=0?(e.fi({kind:"endEditPoint",event:X,data:e._edge,index:Y}),R.endTransaction()):e.$23l&&e.$40l&&(e.fi({kind:"endEditRotation",event:X}),R.endTransaction())},handleWindowTouchEnd:function(B){this.handleWindowMouseUp(B)},handleWindowMouseUp:function(I){var v=this,q=v.gv,p=q.dm(),w=v._shape,J=v._edge,z=v.$13l,s=v.$40l,h=v.$9l,H=v.$10l,b=v.$67l;if((w||J)&&z>=0&&h>=0){var X,k;if(w){var l=w.p(),O=w.getRotation();X=w.getPoints(),k=X.get(h),qi(w,l,O,z,k,!1)}else if(X=Nj(q.getDataUI(J),J.s("edge.points"),!0),k=X.get(h),0===z){var R=X.get(0);J.s("edge.source.offset.x",k.x-R.x),J.s("edge.source.offset.y",k.y-R.y)}else if(z===X.size()-1){var U=X.get(X.size()-1);J.s("edge.target.offset.x",k.x-U.x),J.s("edge.target.offset.y",k.y-U.y)}else"points"===J.s("edge.type")&&(X.set(z,k),J.s("edge.points",vc(X)))}v.$47l(I);var c=v.$73l;1===b?(p.beginTransaction(),c?q.sm().each(function(g){if(g.setHost&&q.isHelperEditable(g,"host")){g.setHost(c);
        var s=v.$75l,o=v.$74l;s&&(g.s("attach.row.index",s.rowIndex),g.s("attach.column.index",s.columnIndex)),o&&(g.s("attach.index",o.attachIndex),g.s("attach.offset",o.attachOffset),g.s("attach.offset.relative",!1),g.s("attach.offset.opposite",!1))}}):q.sm().each(function(z){z.setHost&&q.isHelperEditable(z,"host")&&(z.setHost(L),z.s("attach.row.index",e),z.s("attach.column.index",e),z.s("attach.index",e),z.s("attach.offset",e),z.s("attach.offset.relative",!1),z.s("attach.offset.opposite",!1))}),p.endTransaction()):2===b?(p.beginTransaction(),c?q.sm().each(function(a){a.setParent&&q.isHelperEditable(a,"parent")&&a.setParent(c)}):q.sm().each(function(M){M.setParent&&q.isHelperEditable(M,"parent")&&M.setParent(L)}),p.endTransaction()):3===b?c&&(p.beginTransaction(),q.sm().each(function(z){if(q.isHelperEditable(z,"edge")&&z instanceof i&&c instanceof i){var r=new C.Edge;p.add(r),r.setSource(z),r.setTarget(c),v.onEdgeCreated&&v.onEdgeCreated(I,r)}}),p.endTransaction()):5===b||6===b?c&&(p.beginTransaction(),q.sm().each(function(Y){Y instanceof m&&c instanceof i&&(5===b&&q.isHelperEditable(Y,"source")?Y.setSource(c):6===b&&q.isHelperEditable(Y,"source")&&Y.setTarget(c))}),p.endTransaction()):(7===b||8===b||9===b)&&p.endTransaction(),(H||s)&&v.$43l(!0),S?(v.clear(),delete v.$64l,v._68I||v.$43l()):(v.handle_mousemove(I,!0),b&&!v._68I&&v.$43l())},handleWindowTouchMove:function(w){this.handleWindowMouseMove(w)},handleWindowMouseMove:function(A){this._78I(A)},handle_mousemove:function(z,Q,B){if(!this._pause){if(!B){var T=S?Sl(z):z;this.$61l={clientX:T.clientX,clientY:T.clientY}}if(Q===!0||!G()){var I=this,y=I.gv,P=!1,R=L;I.clear(),y.sm().size()>0&&(R=y.lp(B?I.$61l:z),P=I._79I(z,R)),P&&(y._editing=1),I.$12l!==I.$65l&&(I.$65l=I.$12l,I.setCursor(I.$12l)),I.$40l!==I.$64l&&(I.$64l=I.$40l,I._68I||I.$43l()),I._hoverSegmentIndex!==I.$66l&&(I.$66l=I._hoverSegmentIndex,I._68I||I.$43l())}}},_78I:function(e){this.autoScroll(e);var d=this,p=d.gv,G=p.lp(e),g=p.getZoom(),n=d.$13l;if((d._shape||d._edge)&&n>=0){var o,D,W,u=d._shape,X=d._edge,l=d.$24l,T=p.getPointSnapSpacing(),q=function(o,y){return T==L||isNaN(T)?{x:o,y:y}:{x:a(o/T)*T,y:a(y/T)*T}};if(u){o=u.getPoints();var V=u.p(),c=u.getRotation(),_=0;D=lo(V,G.x-V.x,G.y-V.y,-c),qi(u,V,c,n,G,!0,l,q),d.fi({kind:"betweenEditPoint",event:e,data:u,index:n})}else if(X){o=Nj(p.getDataUI(X),X.s("edge.points"),!0),G.x-=l.x,G.y-=l.y,D=G;var J,P,C=X.s("edge.offset"),v=o.size(),O=v>2;if(0===n){var K=o.get(0);C&&(K=$d(K,o.get(1),-C,O),G=$d(G,o.get(1),-C,O)),J=G.x-K.x,P=G.y-K.y,W=q(J,P),X.s("edge.source.offset.x",W.x),X.s("edge.source.offset.y",W.y)}else if(n===v-1){var r=o.get(v-1);C&&(r=$d(r,o.get(v-2),-C,O),G=$d(G,o.get(v-2),-C,O)),J=G.x-r.x,P=G.y-r.y,W=q(J,P),X.s("edge.target.offset.x",W.x),X.s("edge.target.offset.y",W.y)}else"points"===X.s("edge.type")&&(W=q(G.x,G.y),W.e=o.get(n).e,o.set(n,W),X.s("edge.points",vc(o)));d.fi({kind:"betweenEditPoint",event:e,data:X,index:n})}if(delete d.$9l,p.isSnapPoint(u)||p.isSnapPoint(X))for(_=0;_<o.size();_++)if(_!==n){var E=o.get(_);if(k(E,D)<p.getEditPointSize()/g){d.$9l=_;break}}}else if(d.$10l){var l=d.$24l;G.x-=l.x,G.y-=l.y;var y=p.sm().getSelection(),S=d.$1l,A=d.$7l,Z=d.$10l,h=d.$4l,$=d.$2l,H=p.getEditRectPadding()/g,B=2*H,Q=p.getSnapSpacing(),w=Q!=L&&!isNaN(Q),z=Rn($,G,Z,A,2*H,p.getResizeMode(),w,!0),s=d.$6l;if(w){var Y=z.width-B,R=z.height-B,f=a(Y/Q)*Q,Iq=a(R/Q)*Q,so=f-Y,bo=Iq-R;("west"===Z||"northwest"===Z||"southwest"===Z)&&(so=-so),("north"===Z||"northwest"===Z||"northeast"===Z)&&(bo=-bo),z=Rn($,G,Z,A,2*H,p.getResizeMode(),w,!1,so,bo)}d.$8l=z,s.x=z.x+H,s.y=z.y+H,s.width=z.width-B,s.height=z.height-B;var Lg=z.x+z.width/2,Re=z.y+z.height/2,qs=s.x,_m=s.y,le=s.width/h.width,yk=s.height/h.height;y.each(function(B){if(B instanceof i&&p.isEditable(B)&&p.isRectEditable(B)){var D=S[B.getId()],u=d.$3l[B.getId()],c={x:D.x+D.width/2,y:D.y+D.height/2},j=0,k=0,U=Z,o=180*M(A-B.getRotation())/N;"northeast"===Z?o>=315||45>o?(j=D.width*le+D.x,k=D.height*(1-yk)+D.y,U="northeast"):o>=45&&135>o?(j=D.width*(1-yk)+D.x,k=D.height*(1-le)+D.y,U="northwest"):o>=135&&225>o?(j=D.width*(1-le)+D.x,k=D.height*yk+D.y,U="southwest"):(j=D.width*yk+D.x,k=D.height*le+D.y,U="southeast"):"north"===Z?o>=315||45>o?(k=D.height*(1-yk)+D.y,U="north"):o>=45&&135>o?(j=D.width*(1-yk)+D.x,U="west"):o>=135&&225>o?(k=D.height*yk+D.y,U="south"):(j=D.width*yk+D.x,U="east"):"northwest"===Z?o>=315||45>o?(j=D.width*(1-le)+D.x,k=D.height*(1-yk)+D.y,U="northwest"):o>=45&&135>o?(j=D.width*(1-yk)+D.x,k=D.height*le+D.y,U="southwest"):o>=135&&225>o?(j=D.width*le+D.x,k=D.height*yk+D.y,U="southeast"):(j=D.width*yk+D.x,k=D.height*(1-le)+D.y,U="northeast"):"west"===Z?o>=315||45>o?(j=D.width*(1-le)+D.x,U="west"):o>=45&&135>o?(k=D.height*le+D.y,U="south"):o>=135&&225>o?(j=D.width*le+D.x,U="east"):(k=D.height*(1-le)+D.y,U="north"):"southwest"===Z?o>=315||45>o?(j=D.width*(1-le)+D.x,k=D.height*yk+D.y,U="southwest"):o>=45&&135>o?(j=D.width*yk+D.x,k=D.height*le+D.y,U="southeast"):o>=135&&225>o?(j=D.width*le+D.x,k=D.height*(1-yk)+D.y,U="northeast"):(j=D.width*(1-yk)+D.x,k=D.height*(1-le)+D.y,U="northwest"):"east"===Z?o>=315||45>o?(j=D.width*le+D.x,U="east"):o>=45&&135>o?(k=D.height*(1-le)+D.y,U="north"):o>=135&&225>o?(j=D.width*(1-le)+D.x,U="west"):(k=D.height*le+D.y,U="south"):"south"===Z?o>=315||45>o?(k=D.height*yk+D.y,U="south"):o>=45&&135>o?(j=D.width*yk+D.x,U="east"):o>=135&&225>o?(k=D.height*(1-yk)+D.y,U="north"):(j=D.width*(1-yk)+D.x,U="west"):"southeast"===Z&&(o>=315||45>o?(j=D.width*le+D.x,k=D.height*yk+D.y,U="southeast"):o>=45&&135>o?(j=D.width*yk+D.x,k=D.height*(1-le)+D.y,U="northeast"):o>=135&&225>o?(j=D.width*(1-le)+D.x,k=D.height*(1-yk)+D.y,U="northwest"):(j=D.width*(1-yk)+D.x,k=D.height*le+D.y,U="southwest"));var P=lo(c,j-c.x,k-c.y,B.getRotation());xc(B,D,U,{x:P.x,y:P.y});var G=qs+s.width*u.x,T=_m+s.height*u.y,$={x:G,y:T};$=lo({x:Lg,y:Re},$.x-Lg,$.y-Re,A),B.p($.x,$.y)}}),d.fi({kind:"betweenEditRect",event:e,direction:Z})}else if(d.$23l&&d.$40l){var Ic=d.$8l,Uk=Ic.width,_r=Ic.height,V={x:Ic.x+Uk/2,y:Ic.y+_r/2},l=d.$24l,Cg=d.$23l,Ze=Cg.x/g-V.x,Te=Cg.y/g-V.y,uq=x(Ze*Ze+Te*Te),ss=Math.asin(l.x/uq),ye=p.sm().getSelection(),Wf=b+F(G.y-V.y,G.x-V.x)-ss,mq=p.getSnapAngle(),Wf=a(Wf/mq)*mq;0>Wf&&(Wf+=j);var aq=Wf-d.$7l,gq=[V.x,0,V.y];ye.each(function(J){if(p.isEditable(J)&&p.isRotationEditable(J)&&p.isVisible(J)){var $=Kf(J.p3(),gq),q=cn();Lh(q,-aq),J.setRotation(J.getRotation()+aq),Rj($,q),J.p3(gq[0]+$[0],gq[1]+$[1],gq[2]+$[2])}}),d.$7l=Wf,d.fi({kind:"betweenEditRotation",event:e})}else if([1,2,3,5,6].indexOf(d.$67l)>=0)d.$72l=e,d.$78l||(d.$78l=1,t(function(){I.isDragging()&&d.$43l(),delete d.$78l},12));else if(7===d.$67l){if(d.$87l instanceof U){var u=d.$87l,bp=d.$88l,Od=I.clone(u.getPoints().get(bp)),kl=G.y-Od.y;Od.e||(Od.e=0),d.$92l||(d.$92l=Od.e),Od.e=d.$92l-kl,u.setPoint(bp,Od)}else if(d.$87l instanceof m){var X=d.$87l,bp=d.$88l,o=Nj(p.getDataUI(X),X.s("edge.points")),Od=o.get(bp),kl=G.y-Od.y;Od.e||(Od.e=0),d.$92l||(d.$92l=Od.e),Od.e=d.$92l-kl,o.set(bp,Od),X.s("edge.points",vc(o))}}else if(8===d.$67l){var ye=p.sm().getSelection(),Ko=d.$93l;Ko||(Ko=d.$93l={}),ye.each(function(T){if(T.p3){var p=T.p3(),E=Ko[T.getId()];E==L&&(E=Ko[T.getId()]=p[1]),T.p3([p[0],E-(G.y-d.$90l.y/g),p[2]])}})}else if(9===d.$67l){var ye=p.sm().getSelection(),dq=d.$94l;dq||(dq=d.$94l={}),ye.each(function(o){if(o.s3){var v=o.s3(),Y=dq[o.getId()];Y==L&&(Y=dq[o.getId()]=v[1]);var D=Y-(G.y-d.$91l.y/g);0>D&&(D=.01),o.s3([v[0],D,v[2]])}})}},$79l:function(r,o){var d=this,U=d.gv,N=U.getZoom(),a=U.getEditHelperSize(),e=r.x/N,u=r.y/N,q=a/N,I=q/2;return B({x:e-I,y:u-I,width:q,height:q},o)?!0:void 0},getHelperCursor:function(){return"crosshair"},_79I:function(M,q){for(var e=this,R=e.gv,w=R.getZoom(),X=R.getEditPointSize(),K=X/w,E=K/2,u=e.$46l(M),G=0;G<u.length;G++){var b,$,h=u[G],j=R.getDataUI(h);if(j&&j._55O){var y=j._55O;if(y._43O&&h instanceof m){if(b=h.s("edge.points"),b=Nj(j,b),$=h.s("edge.segments"),$&&$.size()||($=ek(b)),e.$42l(h,q,b._as,$,"edge"))return!0;if("points"===h.s("edge.type")&&e.$41l(h,q,b._as,$,"edge"))return}if(y._43O&&h instanceof U&&y.$15l&&y.$15l.length===h.getPoints().size()){if(b=y.$15l,$=h.getSegments(),$&&$.size()||($=ek(b)),e.$42l(h,q,b,$,"shape"))return!0;if(e.$41l(h,q,b,$,"shape"))return}}}if(e.$16l){var b,A=e.$16l,k=A[3].x-A[7].x,d=A[3].y-A[7].y,V=x(k*k+d*d),N=A[1].x-A[5].x,f=A[1].y-A[5].y,F=x(N*N+f*f),_={x:q.x*w,y:q.y*w};if(e._80I(_,0,A[0],"northwest",V,F)||e._80I(_,1,A[1],"north",V,F)||e._80I(_,2,A[2],"northeast",V,F)||e._80I(_,7,A[7],"west",V,F)||e._80I(_,3,A[3],"east",V,F)||e._80I(_,6,A[6],"southwest",V,F)||e._80I(_,5,A[5],"south",V,F)||e._80I(_,4,A[4],"southeast",V,F))return!0}if(e.$23l){var J=e.$23l,P=J.x/w,Q=J.y/w;if(B({x:P-E,y:Q-E,width:K,height:K},q))return e.$40l=1,e.$12l=e.getHelperCursor("rotation")||"crosshair",!0}return e.$68l&&e.$79l(e.$68l,q)?(e.$67l=1,e.$12l=e.getHelperCursor("host")||"crosshair",!0):e.$69l&&e.$79l(e.$69l,q)?(e.$67l=2,e.$12l=e.getHelperCursor("parent")||"crosshair",!0):e.$70l&&e.$79l(e.$70l,q)?(e.$67l=3,e.$12l=e.getHelperCursor("edge")||"crosshair",!0):e.$71l&&e.$79l(e.$71l,q)?(e.$67l=4,e.$12l=e.getHelperCursor("remove")||"crosshair",!0):e.$82l&&e.$79l(e.$82l,q)?(e.$67l=5,e.$12l=e.getHelperCursor("source")||"crosshair",!0):e.$83l&&e.$79l(e.$83l,q)?(e.$67l=6,e.$12l=e.getHelperCursor("target")||"crosshair",!0):e._pointElevationHelperPoint&&e.$79l(e._pointElevationHelperPoint,q)?(e.$67l=7,e.$12l=e.getHelperCursor("pointElevation")||"crosshair",!0):e.$90l&&e.$79l(e.$90l,q)?(e.$67l=8,e.$12l=e.getHelperCursor("elevation")||"crosshair",!0):e.$91l&&e.$79l(e.$91l,q)?(e.$67l=9,e.$12l=e.getHelperCursor("tall")||"crosshair",!0):!1},_80I:function(F,m,c,n,L,s){var f=this,j=f.gv,Z=j.getEditPointSize(),P=Z/2,o=j.sm(),U=j.isDirectionEditable;if(U&&1===o.size()){var w=o.ld();if(U=U.bind(j),w instanceof i){if(!U(w,n))return!1;if("east"===n){if(U(w,"northeast")&&U(w,"southeast")&&2*Z>=s)return!1}else if("west"===n){if(U(w,"northwest")&&U(w,"southwest")&&2*Z>=s)return!1}else if("north"===n){if(U(w,"northwest")&&U(w,"northeast")&&2*Z>=L)return!1}else if("south"===n&&U(w,"southwest")&&U(w,"southeast")&&2*Z>=L)return!1}}else{if(2*Z>=L&&("north"===n||"south"===n))return!1;if(2*Z>=s&&("east"===n||"west"===n))return!1}if(B({x:c.x-P,y:c.y-P,width:Z,height:Z},F)){if(f.$10l!==n){var E=180*f.$7l/N,d="";E>=337.5||22.5>E?d="north":E>=22.5&&67.5>E?d="northeast":E>=67.5&&112.5>E?d="east":E>=112.5&&157.5>E?d="southeast":E>=157.5&&202.5>E?d="south":E>=202.5&&247.5>E?d="southwest":E>=247.5&&292.5>E?d="west":E>=292.5&&337.5>E&&(d="northwest");var O=Bg.indexOf(d),d=Bg[m-(1-O)+8];switch(d){case"northwest":f.$12l="nwse-resize";break;case"northeast":f.$12l="nesw-resize";break;case"southwest":f.$12l="nesw-resize";break;case"southeast":f.$12l="nwse-resize";break;case"north":f.$12l="ns-resize";break;case"east":f.$12l="ew-resize";break;case"south":f.$12l="ns-resize";break;case"west":f.$12l="ew-resize"}f.$10l=n}return!0}return!1},$42l:function(h,b,c,C,S){var Q,m=this,I=m.gv,P=I.getEditPointSize(),j=P/I.getZoom(),D=-1,v={x:b.x,y:b.y,width:0,height:0},M=function(y){"shape"===S?m._shape=h:m._edge=h,m._removePointIndex=y},R=function(e){"shape"===S?m._shape=h:m._edge=h,m.$13l=e,m.$12l="crosshair"};for(H(v,j/2),D=c.length-1,Q=C.size()-1;Q>=0;Q--){var X=C.get(Q);if(1===X||2===X)D-=1;else if(3===X){var d=c[D-1];if(B(v,d))return R(D-1),!0;D-=2}else if(4===X){var w=c[D-1],L=c[D-2];if(B(v,w))return R(D-1),!0;if(B(v,L))return R(D-2),!0;D-=3}}for(D=c.length-1,Q=C.size()-1;Q>=0;Q--){var X=C.get(Q),Z=c[D];if(B(v,Z))return M(D),R(D),!0;1===X||2===X?D-=1:3===X?D-=2:4===X&&(D-=3)}return!1},$41l:function(f,P,$,t,B){var b=this,A=b.gv,o=-1,Z=0,D={x:P.x,y:P.y,width:0,height:0},O=function(A,j){b._hoverSegmentIndex=j,b._lp=P,"shape"===B?b._shape=f:b._edge=f};for(H(D,A.getSegmentHoverWidth()/2/A.getZoom()),f instanceof U&&f.isClosePath()&&t.indexOf(5)<0&&(t=new E(t._as),t.add(5));Z<t.size();Z++){var h=t.get(Z);if(1===h){var r=$[o],d=$[o+1];if(r){var j=en(new Lp(r.x,r.y),new Lp(d.x,d.y),new Lp(D.x,D.y),new Lp(D.x+D.width,D.y+D.height));if(j.$62l===n&&j.points.length>0)return O(j,Z),!0}o+=1}else if(2===h){var r=$[o],d=$[o+1],j=en(new Lp(r.x,r.y),new Lp(d.x,d.y),new Lp(D.x,D.y),new Lp(D.x+D.width,D.y+D.height));if(j.$62l===n&&j.points.length>0)return O(j,Z),!0;o+=1}else if(3===h){var r=$[o],Y=$[o+1],M=$[o+2],j=ac(new Lp(r.x,r.y),new Lp(Y.x,Y.y),new Lp(M.x,M.y),new Lp(D.x,D.y),new Lp(D.x+D.width,D.y+D.height));if(j.$62l===n)return O(j,Z),!0;o+=2}else if(4===h){var r=$[o],L=$[o+1],p=$[o+2],M=$[o+3],j=Yn(new Lp(r.x,r.y),new Lp(L.x,L.y),new Lp(p.x,p.y),new Lp(M.x,M.y),new Lp(D.x,D.y),new Lp(D.x+D.width,D.y+D.height));if(j.$62l===n)return O(j,Z),!0;o+=3}else if(5===h){var r=$[o],d=$[0];if(r){var j=en(new Lp(r.x,r.y),new Lp(d.x,d.y),new Lp(D.x,D.y),new Lp(D.x+D.width,D.y+D.height));if(j.$62l===n&&j.points.length>0)return O(j,Z),!0}}}return!1},addShapePoint:function(k,S,T){var P=this,z=P.gv,V=z.dm();if(V.beginTransaction(),0===arguments.length&&(k=P._shape||P._edge,S=P._hoverSegmentIndex,T=P._lp),k instanceof U||k instanceof m){var W=Jm(k,z.getDataUI(k),S);if(!isNaN(S)&&T&&!isNaN(W)){var C=T;if(k instanceof U){var N=k.p(),d=k.getRotation(),w=k.toSegments();w&&w.size()||(w=ek(k.getPoints())),k.isClosePath()&&w.indexOf(5)<0&&(w=new E(w._as),w.add(5));var s=w.get(S),y="addPoint",g="removePointAt";if(2===s||1===s){var $={x:C.x,y:C.y};w.add(s,S),$=lo(N,$.x-N.x,$.y-N.y,-d),k[y]($,W+1)}else if(3===s){var v=k.getPoints(),h=v.get(W),L=v.get(W+2),$={x:C.x,y:C.y};$=lo(N,$.x-N.x,$.y-N.y,-d);var x=og(h,$),D=og($,L);w.removeAt(S),w.add(3,S),w.add(3,S),k.setPoint(W+1,$),k[y](D,W+2),k[y](x,W+1)}else if(4===s){var v=k.getPoints(),h=v.get(W),L=v.get(W+3),$={x:C.x,y:C.y};$=lo(N,$.x-N.x,$.y-N.y,-d);var x=Gh(h,$),D=_k(h,$),Y=Gh($,L),e=_k($,L);w.removeAt(S),w.add(4,S),w.add(4,S),k[g](W+1),k[g](W+1),k[y]($,W+1),k[y](e,W+2),k[y](Y,W+2),k[y](D,W+1),k[y](x,W+1)}else if(5===s){var $={x:C.x,y:C.y};w.add(2,S),$=lo(N,$.x-N.x,$.y-N.y,-d),k[y]($,W+1)}k.isClosePath()&&w.remove(5),k.setSegments(w);var O=k.getWidth(),Z=k.getHeight(),_=k.p().x-O/2,M=k.p().y-Z/2;_-=N.x,M-=N.y;var f=zo(k,{x:_,y:M,width:O,height:Z},d,N);k.p(f.x,f.y)}else if(k instanceof m){if("points"!==k.s("edge.type"))return V.endTransaction(),void 0;var v=k.s("edge.points");w=k.s("edge.segments"),v=Nj(z.getDataUI(k),v),w&&w.size()||(w=ek(v)),w=new E(w._as.slice(0)),v=new E(v._as.slice(0));var s=w.get(S);if(2===s||1===s){var $={x:C.x,y:C.y};w.add(s,S),v.add($,W+1)}else if(3===s){var h=v.get(W),L=v.get(W+2),$={x:C.x,y:C.y},x=og(h,$),D=og($,L);w.removeAt(S),w.add(3,S),w.add(3,S),v.set(W+1,$),v.add(D,W+2),v.add(x,W+1)}else if(4===s){var h=v.get(W),L=v.get(W+3),$={x:C.x,y:C.y},x=Gh(h,$),D=_k(h,$),Y=Gh($,L),e=_k($,L);w.removeAt(S),w.add(4,S),w.add(4,S),v.removeAt(W+1),v.removeAt(W+1),v.add($,W+1),v.add(e,W+2),v.add(Y,W+2),v.add(D,W+1),v.add(x,W+1)}k.s("edge.points",vc(v)),k.s("edge.segments",w)}}}V.endTransaction()},removeShapePoint:function(P,R){var v=this,X="removeAt",L=v.gv,F=L.dm();if(F.beginTransaction(),0===arguments.length&&(P=v._shape||v._edge,R=v._removePointIndex),R>=0&&(P instanceof U||P instanceof m)){var f=Pn(P,v.gv.getDataUI(P),R),i=R;if(P instanceof U){var r=P.p(),O=P.toSegments();O&&O.size()||(O=ek(P.getPoints()));var S=O.get(f),I="removePointAt";if(1===S&&0===i)if(P.getPoints().size()>1){var V=O.get(f+1);O[X](f+1),3===V?P[I](i+1):4===V&&(P[I](i+2),P[I](i+1)),P[I](i)}else P.dm().remove(P);else 2===S||1===S?(O[X](f),P[I](i)):3===S?(O[X](f),P[I](i),P[I](i-1)):4===S&&(O[X](f),P[I](i),P[I](i-1),P[I](i-2));P.setSegments(O);var A=P.getWidth(),e=P.getHeight(),Q=P.p().x-A/2,C=P.p().y-e/2;Q-=r.x,C-=r.y;var Y=zo(P,{x:Q,y:C,width:A,height:e},P.getRotation(),r);P.p(Y.x,Y.y)}else if(P instanceof m){if("points"!==P.s("edge.type"))return F.endTransaction(),void 0;var x=P.s("edge.points");if(O=P.s("edge.segments"),x&&(x=Nj(v.gv.getDataUI(P),x),O&&O.size()||(O=ek(x))),0===R||R===x.size()-1)return F.endTransaction(),void 0;O=new E(O._as.slice(0)),x=new E(x._as.slice(0));var S=O.get(f);2===S||1===S?(O[X](f),x[X](i)):3===S?(O[X](f),x[X](i),x[X](i-1)):4===S&&(O[X](f),x[X](i),x[X](i-1),x[X](i-2)),P.s("edge.segments",O),P.s("edge.points",vc(x))}}F.endTransaction()},changeShapeSegment:function(a,e,B){var L=this,h=L.gv,X=h.dm();if(X.beginTransaction(),1!==arguments.length||isNaN(a)||(B=a,a=L._shape||L._edge,e=L._hoverSegmentIndex),a instanceof U||a instanceof m){var f=Jm(a,L.gv.getDataUI(a),e);if(!isNaN(e)&&!isNaN(f))if(a instanceof U){var n=a.p(),K=a.toSegments();K&&K.size()||(K=ek(a.getPoints()));var M=K.get(e),w=a.toPoints();if(1===B||2===B)1===M||2===M?K.set(e,B):3===M?(K.set(e,B),w.removeAt(f+1)):4===M&&(K.set(e,B),w.removeAt(f+1),w.removeAt(f+1));else if(3===B){var S=function(){var n=w.get(f),H=w.get(f+1),h=og(n,H);K.set(e,3),w.add(h,f+1)};2===M||1===M?S():4===M&&(w.removeAt(f+1),w.removeAt(f+1),S())}else if(4===B){var O=function(){var s=w.get(f),Q=w.get(f+1),B=Gh(s,Q),n=_k(s,Q);K.set(e,4),w.add(B,f+1),w.add(n,f+2)};2===M||1===M?O():3===M&&(w.removeAt(f+1),O())}a.setSegments(K),a.setPoints(w);var z=a.getWidth(),c=a.getHeight(),W=a.p().x-z/2,q=a.p().y-c/2;W-=n.x,q-=n.y;var v=new zo(a,{x:W,y:q,width:z,height:c},a.getRotation(),n);a.p(v.x,v.y)}else if(a instanceof m){if("points"!==a.s("edge.type"))return X.endTransaction(),void 0;var w=a.s("edge.points");K=a.s("edge.segments"),w&&(w=Nj(L.gv.getDataUI(a),w),K&&K.size()||(K=ek(w))),K=new E(K._as.slice(0)),w=new E(w._as.slice(0));var M=K.get(e);if(1===B||2===B)1===M||2===M?K.set(e,B):3===M?(K.set(e,B),w.removeAt(f+1)):4===M&&(K.set(e,B),w.removeAt(f+1),w.removeAt(f+1));else if(3===B){var S=function(){var o=w.get(f),k=w.get(f+1),j=og(o,k);K.set(e,3),w.add(j,f+1)};2===M||1===M?S():4===M&&(w.removeAt(f+1),w.removeAt(f+1),S())}else if(4===B){var O=function(){var R=w.get(f),I=w.get(f+1),h=Gh(R,I),F=_k(R,I);K.set(e,4),w.add(h,f+1),w.add(F,f+2)};2===M||1===M?O():3===M&&(w.removeAt(f+1),O())}a.s("edge.points",vc(w)),a.s("edge.segments",K)}}X.endTransaction()},getDefaultSegments:function(u){var l=this.gv,g=l.getDataUI(u);if(u instanceof m){var v=u.s("edge.points");return v=Nj(g,v),ek(v)}if(u instanceof U){var v=u.getPoints(),p=u.getSegments();return p&&p.size()>0?p:ek(v)}},$43l:function(V){var z=this;V&&(z.$5l=1),z._68I=1,z._42()},_42:function(){var A=this;if(A._68I){delete A._68I;var g=A.gv,o=A.$5l,W=g.getZoom(),l=g.getEditPointSize(),$=l/2,S=new E,k=A._view,e=A._edge,q=A._shape,F=k.getContext("2d"),h=g.tx(),r=g.ty(),T=L,u=g.getEditPointBackground(),O=g.getControlPointBackground(),f=g.getControlPointBorderColor(),G=g.getEditPointBorderColor(),Q=g.getEditRectBorderColor(),K=g.getDirectionLineColor(),v=g.getSegmentHoverColor(),a=g.getSnapPointBorderColor(),B=g.getJoinPointBackground(),V=g.getJoinPointBorderColor(),n=g.getSegmentHoverWidth(),N=[5,5],Y=g.getEditRectBorderStyle();ec(g,function(n){g.isSelected(n)&&g.isVisible(n)&&S.add(n)}),F.clearRect(0,0,P(k.width),P(k.height)),F.save(),Z.translateAndScale(F,h,r,1);var R=L,c={x:0,y:0,width:0,height:0},z=0,X=0,b=0,t=0,M=0,y=0,Pe=0,Oh=0,He=0,Ue=0,Yj=[];if(o?(delete A.$6l,delete A.$8l,delete A.$7l,delete A.$16l,delete A.$23l):(R=A.$6l,T=A.$7l),delete A.$68l,delete A.$69l,delete A.$71l,delete A.$70l,delete A.$82l,delete A.$83l,delete A._pointElevationHelperPoint,delete A.$90l,delete A.$91l,delete A.$75l,delete A.$74l,S.each(function(G){var D=g.getDataUI(G);if(D){var B=D._55O;if(g.isEditable(G))B._56O&&G instanceof i&&X++,Yj.push(G),B._42O&&G instanceof i&&z++,g.isHelperEditable(G,"host")&&t++,g.isHelperEditable(G,"parent")&&b++,g.isHelperEditable(G,"remove")&&M++,g.isHelperEditable(G,"edge")&&y++,g.isHelperEditable(G,"source")&&Pe++,g.isHelperEditable(G,"target")&&Oh++,g.isHelperEditable(G,"elevation")&&He++,g.isHelperEditable(G,"tall")&&Ue++;else if(G instanceof d&&G.isExpanded()){var K=!0,F=g.getEditableFunc();F&&(K=F(G)),K&&(g.isHelperEditable(G,"host")&&t++,g.isHelperEditable(G,"parent")&&b++,g.isHelperEditable(G,"remove")&&M++,g.isHelperEditable(G,"edge")&&y++,g.isHelperEditable(G,"source")&&Pe++,g.isHelperEditable(G,"target")&&Oh++,g.isHelperEditable(G,"elevation")&&He++,g.isHelperEditable(G,"tall")&&Ue++,Yj.push(G))}}}),F.beginPath(),F.lineWidth=1,F.strokeStyle=g.getNodeBorderColor(),Yj.forEach(function(Q){var G=g.getDataUI(Q),K=G._55O;if(o)if(T==L&&(T=Q instanceof m?0:Q instanceof d&&Q.isExpanded()?0:Q.getRotation(),A.$7l=T),R==L){var y,E,I;if(Q instanceof d&&Q.isExpanded()||Q instanceof m){var S=g.getDataUIBounds(Q);E=S.width,I=S.height,y={x:S.x+E/2,y:S.y+I/2}}else y=Q.p(),E=Q.getWidth(),I=Q.getHeight();R={x:y.x,y:y.y,width:0,height:0},c.x=y.x-E/2,c.y=y.y-I/2,c.width=E,c.height=I,R=D(R,c)}else{var y,E,I,n,B=R.x+R.width/2,H=R.y+R.height/2,e={x:B,y:H};if(Q instanceof d&&Q.isExpanded()||Q instanceof m){n=0;var S=g.getDataUIBounds(Q);E=S.width,I=S.height,y={x:S.x+E/2,y:S.y+I/2}}else y=Q.p(),E=Q.getWidth(),I=Q.getHeight(),n=Q.getRotation();var p={x:y.x-E/2,y:y.y-I/2,width:E,height:I},Z={x:p.x,y:p.y},N={x:p.x+p.width,y:p.y},V={x:p.x,y:p.y+p.height},X={x:p.x+p.width,y:p.y+p.height},Z=lo(y,Z.x-y.x,Z.y-y.y,n),V=lo(y,V.x-y.x,V.y-y.y,n),X=lo(y,X.x-y.x,X.y-y.y,n),N=lo(y,N.x-y.x,N.y-y.y,n),r=-T,Y=lo(e,Z.x-e.x,Z.y-e.y,r),J=lo(e,N.x-e.x,N.y-e.y,r),O=lo(e,V.x-e.x,V.y-e.y,r),j=lo(e,X.x-e.x,X.y-e.y,r),q=w([Y,J,O,j]);R=D(R,q),R.x-=B,R.y-=H;var U=zo(L,R,T,e);R.x=U.x-R.width/2,R.y=U.y-R.height/2}if(z>1&&g.isEditable(Q)&&g.isRectEditable(Q)&&Q instanceof i){var v=Q.getRect(),M=K.$45l,u=op(M[0],W),C=op(M[2],W),f=op(M[4],W),x=op(M[6],W);Q.getRotation()?(F.moveTo(u.x,u.y),F.lineTo(C.x,C.y),F.lineTo(f.x,f.y),F.lineTo(x.x,x.y),F.lineTo(u.x,u.y)):F.rect(v.x*W,v.y*W,v.width*W,v.height*W)}}),F.stroke(),R){A.$6l=s(R),H(R,g.getEditRectPadding()/W);var mm={x:R.x+R.width/2,y:R.y+R.height/2},lp=od(mm,R.width,R.height,T),Ke=lp[0],zn=lp[1],Mf=lp[2],rl=lp[3],kg=lp[4],xr=lp[5],Zl=lp[6],Le=lp[7];if(Ke=op(lp[0],W),zn=op(lp[1],W),Mf=op(lp[2],W),rl=op(lp[3],W),kg=op(lp[4],W),xr=op(lp[5],W),Zl=op(lp[6],W),Le=op(lp[7],W),A.$8l=R,z>0&&(A.$16l=[Ke,kg,zn,xr,rl,Zl,Mf,Le],F.beginPath(),F.lineWidth=1,F.strokeStyle=Q,"dashed"===Y&&F.setLineDash&&F.setLineDash(N),F.moveTo(Ke.x,Ke.y),F.lineTo(zn.x,zn.y),F.lineTo(rl.x,rl.y),F.lineTo(Mf.x,Mf.y),F.lineTo(Ke.x,Ke.y),F.stroke(),"dashed"===Y&&F.setLineDash&&F.setLineDash([])),F.beginPath(),F.lineWidth=1,F.fillStyle=u,F.strokeStyle=G,z>0){var id=xr.x-Le.x,Ni=xr.y-Le.y,ki=x(id*id+Ni*Ni),hg=kg.x-Zl.x,pi=kg.y-Zl.y,af=x(hg*hg+pi*pi),Am=2*l;if(g.isDirectionEditable&&1===Yj.length){var vh=Yj[0],Sl=g.getDataUI(vh),Qr=Sl._55O,lh=g.isDirectionEditable.bind(g);if(Qr._42O){var Sd,yd,wk,um;lh(vh,"northwest")&&(Sd=!0,F.rect(Ke.x-$,Ke.y-$,l,l)),lh(vh,"northeast")&&(yd=!0,F.rect(zn.x-$,zn.y-$,l,l)),lh(vh,"southwest")&&(wk=!0,F.rect(Mf.x-$,Mf.y-$,l,l)),lh(vh,"southeast")&&(um=!0,F.rect(rl.x-$,rl.y-$,l,l)),lh(vh,"north")&&(Sd&&yd?ki>Am&&F.rect(kg.x-$,kg.y-$,l,l):F.rect(kg.x-$,kg.y-$,l,l)),lh(vh,"south")&&(um&&wk?ki>Am&&F.rect(Zl.x-$,Zl.y-$,l,l):F.rect(Zl.x-$,Zl.y-$,l,l)),lh(vh,"west")&&(wk&&Sd?af>Am&&F.rect(Le.x-$,Le.y-$,l,l):F.rect(Le.x-$,Le.y-$,l,l)),lh(vh,"east")&&(um&&yd?af>Am&&F.rect(xr.x-$,xr.y-$,l,l):F.rect(xr.x-$,xr.y-$,l,l))}}else ki>Am&&(F.rect(kg.x-$,kg.y-$,l,l),F.rect(Zl.x-$,Zl.y-$,l,l)),af>Am&&(F.rect(xr.x-$,xr.y-$,l,l),F.rect(Le.x-$,Le.y-$,l,l)),F.rect(Ke.x-$,Ke.y-$,l,l),F.rect(zn.x-$,zn.y-$,l,l),F.rect(Mf.x-$,Mf.y-$,l,l),F.rect(rl.x-$,rl.y-$,l,l)}if(X>0){var Qh=A.$23l=lo(kg,0,2*-l,T);F.moveTo(Qh.x+$,Qh.y),F.arc(Qh.x,Qh.y,$,0,j,!1)}F.fill(),F.stroke(),A.$40l&&A.$44l(F,R,T);var yp,gb,ff=g.getLeftTopHelpers(),Gh=g.getRightTopHelpers(),Ym=g.getLeftBottomHelpers(),ms=g.getRightBottomHelpers(),Rb=g.getEdgeHelpers(),Vd=g.getEditHelperSize(),Ac=Vd/2,li=function(C,L,c,U){"leftTop"===L?(yp=R.x*W-Vd-$-("h"===U?c*(Vd+$):0)-1,gb=R.y*W-Vd-$-("v"===U?c*(Vd+$):0)-1):"rightTop"===L?(yp=(R.x+R.width)*W+$+("h"===U?c*(Vd+$):0)+1,gb=R.y*W-Vd-$-("v"===U?c*(Vd+$):0)-1):"leftBottom"===L?(yp=R.x*W-Vd-$-("h"===U?c*(Vd+$):0)-1,gb=(R.y+R.height)*W+$+("v"===U?c*(Vd+$):0)+1):"rightBottom"===L&&(yp=(R.x+R.width)*W+$+("h"===U?c*(Vd+$):0)+1,gb=(R.y+R.height)*W+$+("v"===U?c*(Vd+$):0)+1);var O=yp+Ac,p=gb+Ac,Q=(R.x+R.width/2)*W,l=(R.y+R.height/2)*W,K=lo({x:Q,y:l},O-Q,p-l,T);if("host"===C){if(t>0)return A.$77l(F,T,K),!0}else if("edge"===C){if(y>0)return A.$80l(F,T,K),!0}else if("remove"===C){if(M>0)return Yj&&1===Yj.length&&Yj[0]instanceof m?A.$81l(F,T,{x:Q+Vd/2+5,y:l}):A.$81l(F,T,K),!0}else if("parent"===C){if(b>0)return Yj&&1===Yj.length&&Yj[0]instanceof m?A.$76l(F,T,{x:Q-Vd/2-5,y:l}):A.$76l(F,T,K),!0}else if("elevation"===C){if(He>0)return A.$85l(F,T,K),!0}else if("tall"===C){if(Ue>0)return A.$86l(F,T,K),!0}else if("source"===C||"target"===C){var o=Yj[0],z=g.getDataUI(o),n=ao(z,!0),r=n[0],H=n[1];if(Pe&&"source"===C)return A.$84l(F,R,r,!0,o.isLooped(),L,c,U),!0;if(Oh&&"target"===C)return A.$84l(F,R,H,!1,o.isLooped(),L,c,U),!0}};if(ff&&ff.length>0){var wg=0;ff.forEach(function(W){li(W,"leftTop",wg,g.getLeftTopHelpersAlign()||"h")&&wg++})}if(Gh&&Gh.length>0){var wg=0;Gh.forEach(function(k){li(k,"rightTop",wg,g.getRightTopHelpersAlign()||"h")&&wg++})}if(Ym&&Ym.length>0){var wg=0;Ym.forEach(function(Y){li(Y,"leftBottom",wg,g.getLeftBottomHelpersAlign()||"h")&&wg++})}if(ms&&ms.length>0){var wg=0;ms.forEach(function(X){li(X,"rightBottom",wg,g.getRightBottomHelpersAlign()||"h")&&wg++})}if(Rb&&Rb.length>0&&((Pe||Oh)&&Yj&&1===Yj.length&&Yj[0]instanceof m?!0:!1)){var wg=0;Rb.forEach(function(l){li(l,"edge",wg,"h")&&wg++})}if(A.$72l){var Wr,ag=A.$67l,Mh=A.$68l,Sk=A.$69l,zq=(A.$71l,A.$70l),sl=A.$82l,Cp=A.$83l;if(1===ag?Wr=Mh:2===ag?Wr=Sk:3===ag?Wr=zq:5===ag?Wr=sl:6===ag&&(Wr=Cp),Wr){var Cf=g.lp(A.$72l),Nc=g.getDataAt(A.$72l);if(Nc&&Nc instanceof i){var Ff,Vq,Xj;if(A.$73l=Nc,1===ag)if(Nc instanceof C.Grid)Ff=A.$75l=ig(Nc,Cf);else if(Nc instanceof C.Shape){Xj=A.$74l=zf(Nc,Cf);var fe=Nc.getPoints();if(Xj){var qd=Xj.attachIndex,qh=Jm(Nc,g.getDataUI(Nc),qd)+1,ud=qh+1>=fe.size()?0:qh+1,Ae=fe.get(qh),Mg=fe.get(ud),be=Nc.p(),vi=Nc.getRotation();Ae=lo(be,Ae.x-be.x,Ae.y-be.y,vi),Mg=lo(be,Mg.x-be.x,Mg.y-be.y,vi),F.beginPath(),F.strokeStyle=v,F.lineWidth=n,F.moveTo(Ae.x*W,Ae.y*W),F.lineTo(Mg.x*W,Mg.y*W),F.stroke()}}Ff?Vq=Ff.rect:(Vq=I.clone(g.getDataUIBounds(Nc)),I.grow(Vq,2)),F.beginPath(),F.rect(Vq.x*W,Vq.y*W,Vq.width*W,Vq.height*W),F.strokeStyle=1===ag||4===ag||6===ag?_:p,F.lineWidth=2,F.setLineDash&&F.setLineDash([8,8]),F.stroke()}else delete A.$73l;Cf.x=Cf.x*W,Cf.y=Cf.y*W;var rn=Kd(Wr.x,Wr.y,Cf.x,Cf.y),Cr=lo(Wr,Cf.x-Wr.x,Cf.y-Wr.y,-rn),hd=Cr.x-Wr.x;F.save(),F.translate(Wr.x,Wr.y),F.rotate(rn),J.width=hd,J.height=40;var Ej=p;(1===ag||4===ag||6===ag)&&(Ej=_),J.comps[0].gradientColor=Ej,I.drawImage(F,J,0,-20,hd,40),F.restore()}}}if(S.each(function(Q){var h=g.getDataUI(Q);if(h){var d,i,Y=h._55O,T=h._78o;if(Y&&Y._43O&&Q instanceof U?(d=Y.$15l,i=Q.getSegments(),i&&i.size()||(i=ek(d)),Q.isClosePath()&&i.indexOf(5)<0&&(i=new E(i._as),i.add(5))):Y&&T&&Y._43O&&(d=Q.s("edge.points"),i=Q.s("edge.segments"),d=Nj(h,d),i&&i.size()||(i=ek(d)),d&&(d=d._as)),d&&i){var C=0,G=i.size(),I=A._hoverSegmentIndex;d=d.slice(0);for(var P=0;P<d.length;P++)d[P]=op(d[P],W);F.beginPath(),F.strokeStyle=K,F.lineWidth=1,C=0;for(var P=0;G>P;P++){var Z=i.get(P);if(1===Z||2===Z)C++;else if(3===Z){var c=d[C-1],z=d[C],t=d[C+1];F.moveTo(c.x,c.y),F.lineTo(z.x,z.y),F.lineTo(t.x,t.y),C+=2}else if(4===Z){var c=d[C-1],H=d[C],u=d[C+1],t=d[C+2];F.moveTo(c.x,c.y),F.lineTo(H.x,H.y),F.moveTo(u.x,u.y),F.lineTo(t.x,t.y),C+=3}}if(F.stroke(),q===Q||e===Q&&"points"===e.s("edge.type")){F.beginPath(),C=0,F.strokeStyle=v,F.lineWidth=n;for(var P=0;G>P;P++){var Z=i.get(P);if(1===Z||2===Z){if(I===P){var c=d[C-1],t=d[C];F.moveTo(c.x,c.y),F.lineTo(t.x,t.y);break}C++}else if(3===Z){if(I===P){var c=d[C-1],z=d[C],t=d[C+1];F.moveTo(c.x,c.y),F.quadraticCurveTo(z.x,z.y,t.x,t.y);break}C+=2}else if(4===Z){if(I===P){var c=d[C-1],H=d[C],u=d[C+1],t=d[C+2];F.moveTo(c.x,c.y),F.bezierCurveTo(H.x,H.y,u.x,u.y,t.x,t.y);break}C+=3}else if(5===Z&&I===P){var c=d[C-1],t=d[0];F.moveTo(c.x,c.y),F.lineTo(t.x,t.y);break}}F.stroke()}F.beginPath(),C=0,F.strokeStyle=V,F.lineWidth=1,F.fillStyle=B;for(var P=0;G>P;P++){var Z=i.get(P);if(1===Z||2===Z){var t=d[C];F.moveTo(t.x+$,t.y),F.arc(t.x,t.y,$,0,j,!0),C++}else if(3===Z){var t=d[C+1];F.moveTo(t.x+$,t.y),F.arc(t.x,t.y,$,0,j,!0),C+=2}else if(4===Z){var t=d[C+2];F.moveTo(t.x+$,t.y),F.arc(t.x,t.y,$,0,j,!0),C+=3}}F.fill(),F.stroke(),F.beginPath(),C=0,F.strokeStyle=f,F.lineWidth=1,F.fillStyle=O;for(var P=0;G>P;P++){var Z=i.get(P);if(1===Z||2===Z)C++;else if(3===Z){var z=d[C];F.moveTo(z.x+$,z.y),F.arc(z.x,z.y,$,0,j,!0),C+=2}else if(4===Z){var H=d[C],u=d[C+1];F.moveTo(H.x+$,H.y),F.arc(H.x,H.y,$,0,j,!0),F.moveTo(u.x+$,u.y),F.arc(u.x,u.y,$,0,j,!0),C+=3}}if(F.fill(),F.stroke(),F.beginPath(),C=0,F.strokeStyle=a,F.lineWidth=2,(q===Q||e===Q)&&A.$9l!=L){var t=d[A.$9l];F.moveTo(t.x+$,t.y),F.arc(t.x,t.y,$,0,j,!0),F.stroke()}}}}),A.$87l&&g.sm().contains(A.$87l)){var hr,kl=A.$87l,_i=A.$88l,Vd=g.getEditHelperSize(),Ac=Vd/2;if(g.isHelperEditable(kl,"pointElevation"))if(kl instanceof U){var rs=kl.getPosition();hr=I.clone(kl.getPoints().get(_i)),hr=lo({x:rs.x,y:rs.y},hr.x-rs.x,hr.y-rs.y,kl.getRotation()),hr.x*=W,hr.y*=W,F.translate(hr.x,hr.y),I.drawImage(F,I.getImage("xeditinteractor_elevationIcon"),Ac,-Ac,Vd,Vd),F.translate(-hr.x,-hr.y),A._pointElevationHelperPoint={x:hr.x+Vd,y:hr.y}}else if(kl instanceof m){var zp=Nj(g.getDataUI(kl),kl.s("edge.points")),hr=I.clone(zp.get(_i));hr.x*=W,hr.y*=W,F.translate(hr.x,hr.y),I.drawImage(F,I.getImage("xeditinteractor_elevationIcon"),Ac,-Ac,Vd,Vd),F.translate(-hr.x,-hr.y),A._pointElevationHelperPoint={x:hr.x+Vd,y:hr.y}}}F.restore(),A.$5l=0}},$89l:function(d,M,v,x){d.save();var k=this,u=k.gv,D=u.getEditHelperSize(),e=D/2;d.beginPath(),d.translate(v.x,v.y),d.rotate(M),I.drawImage(d,x,-e,-e,D,D),d.restore()},$85l:function(j,i,t){var y=this;y.$90l=t,y.$89l(j,i,t,I.getImage("xeditinteractor_elevationIcon"))},$86l:function(Z,h,L){var T=this;T.$91l=L,T.$89l(Z,h,L,I.getImage("xeditinteractor_tallIcon"))},$77l:function(y,u,b){var c=this;c.$68l=b,c.$89l(y,u,b,I.getImage("xeditinteractor_hostIcon"))},$80l:function(X,x,G){var u=this;u.$70l=G,u.$89l(X,x,G,I.getImage("xeditinteractor_edgeIcon"))},$81l:function(X,E,G){var d=this;d.$71l=G,d.$89l(X,E,G,I.getImage("xeditinteractor_removeIcon"))},$76l:function(P,c,G){var o=this;o.$69l=G,o.$89l(P,c,G,I.getImage("xeditinteractor_parentIcon"))},$84l:function(T,F,C,B,f){var P,y=this,Q=y.gv,G=Q.getZoom(),c=Q.getEditHelperSize(),p=c/2;C.x*=G,C.y*=G,f&&(B?C.x-=p+5:C.x+=p+5),C.y-=c-2,B?(y.$82l=C,P=I.getImage("xeditinteractor_sourceIcon")):(y.$83l=C,P=I.getImage("xeditinteractor_targetIcon")),T.beginPath(),T.translate(C.x,C.y),I.drawImage(T,P,-p,-p,c,c),T.translate(-C.x,-C.y)},$44l:function(J,c,R){J.save();var C=this.gv.getZoom(),l=x(r(c.width,2)+r(c.height,2))/2*C+10,p=l,u=p+8,T=p+18,P=R,B=c.x+c.width/2,F=c.y+c.height/2;J.translate(B*C,F*C),J.beginPath(),J.strokeStyle="rgb(150, 150, 150)";for(var $=0,i=0,H=0,w=0,t=0,s=0;360>s;s++)$=s*N/180,0===s%5&&(i=q($)*p,H=A($)*p,w=q($)*u,t=A($)*u,J.moveTo(i,H),J.lineTo(w,t)),0===s%45&&(i=q($)*p,H=A($)*p,w=q($)*T,t=A($)*T,J.moveTo(i,H),J.lineTo(w,t));J.stroke(),J.beginPath(),J.rotate(-b),J.beginPath(),J.fillStyle="rgba(255, 0, 0, 0.1)",J.strokeStyle="rgb(157, 157, 157)",J.moveTo(0,0),J.arc(0,0,T,0,R,!1),J.fill(),J.beginPath(),J.moveTo(0+T,0),J.arc(0,0,T,0,R,!1),J.stroke(),J.rotate(b),J.font="bold 12px Verdana, Arial";var n=20*A(P),k=20*q(P),G=a(180*P/N)+"°";J.textAlign="center",J.textBaseline="middle",J.beginPath();var I=J.measureText("365.°").width;J.fillStyle="white",J.rect(n-I/2,-k-10,I,20),J.fill(),J.beginPath(),J.fillStyle="rgb(79,79,79)",J.fillText(G,n,-k),J.restore()}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);